<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Test: movement_task Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classmovement__task.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classmovement__task-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">movement_task Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Class for the robot movement task.  
 <a href="classmovement__task.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="movement__task_8h_source.html">movement_task.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3f01b2ad38979cd14b8869c8fe747070"><td class="memItemLeft" align="right" valign="top"><a id="a3f01b2ad38979cd14b8869c8fe747070" name="a3f01b2ad38979cd14b8869c8fe747070"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>movement_task</b> (void)</td></tr>
<tr class="memdesc:a3f01b2ad38979cd14b8869c8fe747070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype Default Constructor. <br /></td></tr>
<tr class="separator:a3f01b2ad38979cd14b8869c8fe747070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c6e5b83a093abc2a70c1c99a4473d01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a9c6e5b83a093abc2a70c1c99a4473d01">movement_task</a> (<a class="el" href="classmotor__driver.html">motor_driver</a> <a class="el" href="classmovement__task.html#a8790f392960d2d1738fb6c0f26708143">Left_Mot</a>, <a class="el" href="classmotor__driver.html">motor_driver</a> <a class="el" href="classmovement__task.html#a63c5f142220b3a1592e249a7bd169c39">Right_Mot</a>, <a class="el" href="classencoder__reader.html">encoder_reader</a> <a class="el" href="classmovement__task.html#a99584813adf349b6ff4fe8e81ac70c28">Left_Encoder</a>, <a class="el" href="classencoder__reader.html">encoder_reader</a> <a class="el" href="classmovement__task.html#affe09dfb539ede96af9e56c3c3b6eaac">Right_Encoder</a>, <a class="el" href="classfeedback__controller.html">feedback_controller</a> <a class="el" href="classmovement__task.html#a000c134886f2b7d52797796c02d16a46">Left_Feedback</a>, <a class="el" href="classfeedback__controller.html">feedback_controller</a> <a class="el" href="classmovement__task.html#a01bfea1b5968672b7505441fd0a259a6">Right_Feedback</a>, UART_HandleTypeDef *<a class="el" href="classmovement__task.html#a54f01985e936321f83a509e73e76a063">huart</a>)</td></tr>
<tr class="memdesc:a9c6e5b83a093abc2a70c1c99a4473d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization For all task constructors.  <br /></td></tr>
<tr class="separator:a9c6e5b83a093abc2a70c1c99a4473d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7090b9325f85bdd9a79185616fe2ab86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a7090b9325f85bdd9a79185616fe2ab86">run</a> (void)</td></tr>
<tr class="memdesc:a7090b9325f85bdd9a79185616fe2ab86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run method to implement the FSM.  <br /></td></tr>
<tr class="separator:a7090b9325f85bdd9a79185616fe2ab86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6f51c515a825fc94e0a71cdff1646b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a4b6f51c515a825fc94e0a71cdff1646b">get_duty</a> (void)</td></tr>
<tr class="memdesc:a4b6f51c515a825fc94e0a71cdff1646b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to get the current duty output.  <br /></td></tr>
<tr class="separator:a4b6f51c515a825fc94e0a71cdff1646b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a11da9703e226518b4c26bb77a4f2f50b"><td class="memItemLeft" align="right" valign="top">typedef void(movement_task::*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a11da9703e226518b4c26bb77a4f2f50b">state_fcn</a>) (void)</td></tr>
<tr class="separator:a11da9703e226518b4c26bb77a4f2f50b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a84cd0d238f628f201020f9cabe254065"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a84cd0d238f628f201020f9cabe254065">state_0</a> (void)</td></tr>
<tr class="memdesc:a84cd0d238f628f201020f9cabe254065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialization Task.  <br /></td></tr>
<tr class="separator:a84cd0d238f628f201020f9cabe254065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af31531705744cc087e398a2cd3108b53"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#af31531705744cc087e398a2cd3108b53">state_1</a> (void)</td></tr>
<tr class="memdesc:af31531705744cc087e398a2cd3108b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">State 1: Move out of Home.  <br /></td></tr>
<tr class="separator:af31531705744cc087e398a2cd3108b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5b4d926c7862bb6cd5b60099cc28e6b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#af5b4d926c7862bb6cd5b60099cc28e6b">state_2</a> (void)</td></tr>
<tr class="memdesc:af5b4d926c7862bb6cd5b60099cc28e6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Satte 2: Rotate to begin circle.  <br /></td></tr>
<tr class="separator:af5b4d926c7862bb6cd5b60099cc28e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecc7cb72f6565f904e8fdba650fb4e62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#aecc7cb72f6565f904e8fdba650fb4e62">state_3</a> (void)</td></tr>
<tr class="memdesc:aecc7cb72f6565f904e8fdba650fb4e62"><td class="mdescLeft">&#160;</td><td class="mdescRight">State 3: Move around in circle.  <br /></td></tr>
<tr class="separator:aecc7cb72f6565f904e8fdba650fb4e62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaaf50a6ec344c6a023fa78bc45cb6d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#adaaf50a6ec344c6a023fa78bc45cb6d6">state_4</a> (void)</td></tr>
<tr class="memdesc:adaaf50a6ec344c6a023fa78bc45cb6d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">State 4: Return Home.  <br /></td></tr>
<tr class="separator:adaaf50a6ec344c6a023fa78bc45cb6d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6bbebe8f31d9c79c70bf59363a460e2a"><td class="memItemLeft" align="right" valign="top"><a id="a6bbebe8f31d9c79c70bf59363a460e2a" name="a6bbebe8f31d9c79c70bf59363a460e2a"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>state</b></td></tr>
<tr class="memdesc:a6bbebe8f31d9c79c70bf59363a460e2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current State. <br /></td></tr>
<tr class="separator:a6bbebe8f31d9c79c70bf59363a460e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e6780efc2ebed6fc3a96315d2d76cbc"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a4e6780efc2ebed6fc3a96315d2d76cbc">runs</a></td></tr>
<tr class="memdesc:a4e6780efc2ebed6fc3a96315d2d76cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private Variable for number of times the task has ran.  <br /></td></tr>
<tr class="separator:a4e6780efc2ebed6fc3a96315d2d76cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5665d1bdc41e24b4d64e0df3c371ebe2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a5665d1bdc41e24b4d64e0df3c371ebe2">num_states</a></td></tr>
<tr class="memdesc:a5665d1bdc41e24b4d64e0df3c371ebe2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a list of all states.  <br /></td></tr>
<tr class="separator:a5665d1bdc41e24b4d64e0df3c371ebe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70dcf006789a7dadd757a2b2f459d6ee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classmovement__task.html#a11da9703e226518b4c26bb77a4f2f50b">state_fcn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a70dcf006789a7dadd757a2b2f459d6ee">state_list</a></td></tr>
<tr class="memdesc:a70dcf006789a7dadd757a2b2f459d6ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function for state 0.  <br /></td></tr>
<tr class="separator:a70dcf006789a7dadd757a2b2f459d6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8790f392960d2d1738fb6c0f26708143"><td class="memItemLeft" align="right" valign="top"><a id="a8790f392960d2d1738fb6c0f26708143" name="a8790f392960d2d1738fb6c0f26708143"></a>
<a class="el" href="classmotor__driver.html">motor_driver</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Left_Mot</b></td></tr>
<tr class="memdesc:a8790f392960d2d1738fb6c0f26708143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Left rear motor object used for actuation. <br /></td></tr>
<tr class="separator:a8790f392960d2d1738fb6c0f26708143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c5f142220b3a1592e249a7bd169c39"><td class="memItemLeft" align="right" valign="top"><a id="a63c5f142220b3a1592e249a7bd169c39" name="a63c5f142220b3a1592e249a7bd169c39"></a>
<a class="el" href="classmotor__driver.html">motor_driver</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Right_Mot</b></td></tr>
<tr class="memdesc:a63c5f142220b3a1592e249a7bd169c39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Right rear motor object used for actuation. <br /></td></tr>
<tr class="separator:a63c5f142220b3a1592e249a7bd169c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99584813adf349b6ff4fe8e81ac70c28"><td class="memItemLeft" align="right" valign="top"><a id="a99584813adf349b6ff4fe8e81ac70c28" name="a99584813adf349b6ff4fe8e81ac70c28"></a>
<a class="el" href="classencoder__reader.html">encoder_reader</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Left_Encoder</b></td></tr>
<tr class="memdesc:a99584813adf349b6ff4fe8e81ac70c28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Left motor encoder object used to get current encoder values and control position. <br /></td></tr>
<tr class="separator:a99584813adf349b6ff4fe8e81ac70c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe09dfb539ede96af9e56c3c3b6eaac"><td class="memItemLeft" align="right" valign="top"><a id="affe09dfb539ede96af9e56c3c3b6eaac" name="affe09dfb539ede96af9e56c3c3b6eaac"></a>
<a class="el" href="classencoder__reader.html">encoder_reader</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Right_Encoder</b></td></tr>
<tr class="memdesc:affe09dfb539ede96af9e56c3c3b6eaac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Right motor encoder object used to get current encoder values and control position. <br /></td></tr>
<tr class="separator:affe09dfb539ede96af9e56c3c3b6eaac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a000c134886f2b7d52797796c02d16a46"><td class="memItemLeft" align="right" valign="top"><a id="a000c134886f2b7d52797796c02d16a46" name="a000c134886f2b7d52797796c02d16a46"></a>
<a class="el" href="classfeedback__controller.html">feedback_controller</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Left_Feedback</b></td></tr>
<tr class="memdesc:a000c134886f2b7d52797796c02d16a46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Feedback controller used to control position of the left motor. <br /></td></tr>
<tr class="separator:a000c134886f2b7d52797796c02d16a46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01bfea1b5968672b7505441fd0a259a6"><td class="memItemLeft" align="right" valign="top"><a id="a01bfea1b5968672b7505441fd0a259a6" name="a01bfea1b5968672b7505441fd0a259a6"></a>
<a class="el" href="classfeedback__controller.html">feedback_controller</a>&#160;</td><td class="memItemRight" valign="bottom"><b>Right_Feedback</b></td></tr>
<tr class="memdesc:a01bfea1b5968672b7505441fd0a259a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Feedback controller used to control position of the right motor. <br /></td></tr>
<tr class="separator:a01bfea1b5968672b7505441fd0a259a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54f01985e936321f83a509e73e76a063"><td class="memItemLeft" align="right" valign="top">UART_HandleTypeDef *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmovement__task.html#a54f01985e936321f83a509e73e76a063">huart</a></td></tr>
<tr class="memdesc:a54f01985e936321f83a509e73e76a063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a pre-initialized uart object.  <br /></td></tr>
<tr class="separator:a54f01985e936321f83a509e73e76a063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a268866c303f9a64fe256acc25a5ad09f"><td class="memItemLeft" align="right" valign="top"><a id="a268866c303f9a64fe256acc25a5ad09f" name="a268866c303f9a64fe256acc25a5ad09f"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>right_sp</b></td></tr>
<tr class="memdesc:a268866c303f9a64fe256acc25a5ad09f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Right Motor set point for position control. <br /></td></tr>
<tr class="separator:a268866c303f9a64fe256acc25a5ad09f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47623b4e4fd9d50a0bd8f918501fa19a"><td class="memItemLeft" align="right" valign="top"><a id="a47623b4e4fd9d50a0bd8f918501fa19a" name="a47623b4e4fd9d50a0bd8f918501fa19a"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>left_sp</b></td></tr>
<tr class="memdesc:a47623b4e4fd9d50a0bd8f918501fa19a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Left motor set point for position control. <br /></td></tr>
<tr class="separator:a47623b4e4fd9d50a0bd8f918501fa19a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a125b28b43864befa4a19f795f046452f"><td class="memItemLeft" align="right" valign="top"><a id="a125b28b43864befa4a19f795f046452f" name="a125b28b43864befa4a19f795f046452f"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>right_duty</b></td></tr>
<tr class="memdesc:a125b28b43864befa4a19f795f046452f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duty cycle for the right motor. <br /></td></tr>
<tr class="separator:a125b28b43864befa4a19f795f046452f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9f194895872cf6a467a6b56ba0a399b"><td class="memItemLeft" align="right" valign="top"><a id="af9f194895872cf6a467a6b56ba0a399b" name="af9f194895872cf6a467a6b56ba0a399b"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>left_duty</b></td></tr>
<tr class="memdesc:af9f194895872cf6a467a6b56ba0a399b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duty cycle for the left motor. <br /></td></tr>
<tr class="separator:af9f194895872cf6a467a6b56ba0a399b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e2f6cb221a5aa14ecc2edbf62975e6d"><td class="memItemLeft" align="right" valign="top"><a id="a6e2f6cb221a5aa14ecc2edbf62975e6d" name="a6e2f6cb221a5aa14ecc2edbf62975e6d"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>start_ticks</b></td></tr>
<tr class="memdesc:a6e2f6cb221a5aa14ecc2edbf62975e6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private variable for the start time for each state. <br /></td></tr>
<tr class="separator:a6e2f6cb221a5aa14ecc2edbf62975e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f33a11eeafd005501777357c33ae3b"><td class="memItemLeft" align="right" valign="top"><a id="a73f33a11eeafd005501777357c33ae3b" name="a73f33a11eeafd005501777357c33ae3b"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>curr_time</b></td></tr>
<tr class="memdesc:a73f33a11eeafd005501777357c33ae3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private variable for the current time in the state. <br /></td></tr>
<tr class="separator:a73f33a11eeafd005501777357c33ae3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19486296c8c4d85f9e605be3dfce4f3"><td class="memItemLeft" align="right" valign="top"><a id="ae19486296c8c4d85f9e605be3dfce4f3" name="ae19486296c8c4d85f9e605be3dfce4f3"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>start_count</b></td></tr>
<tr class="separator:ae19486296c8c4d85f9e605be3dfce4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for the robot movement task. </p>
<p>The class below is used to implement a finite state machine for the movement of the robot about the game board. This consists of 5 states: an initialization state, state 1 move out of home box, state 2 rotate to begin circle, state 3 move in circles around the center of the board, state 4 return to home. This is implemented by switching between tasks when encoder values are reached and home position is reached. Each state uses logic to stop motor motion if the deadman's switch is unpressed. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a11da9703e226518b4c26bb77a4f2f50b" name="a11da9703e226518b4c26bb77a4f2f50b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11da9703e226518b4c26bb77a4f2f50b">&#9670;&#160;</a></span>state_fcn</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(movement_task::* movement_task::state_fcn) (void)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is used to call the required state function. It works by taking in the current state and calling the specific function corresponding to that state. The list of states and corresponding functions is kept in a struct that the function accesses. </p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a9c6e5b83a093abc2a70c1c99a4473d01" name="a9c6e5b83a093abc2a70c1c99a4473d01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c6e5b83a093abc2a70c1c99a4473d01">&#9670;&#160;</a></span>movement_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">movement_task::movement_task </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classmotor__driver.html">motor_driver</a>&#160;</td>
          <td class="paramname"><em>Left_Mot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmotor__driver.html">motor_driver</a>&#160;</td>
          <td class="paramname"><em>Right_Mot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classencoder__reader.html">encoder_reader</a>&#160;</td>
          <td class="paramname"><em>Left_Encoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classencoder__reader.html">encoder_reader</a>&#160;</td>
          <td class="paramname"><em>Right_Encoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfeedback__controller.html">feedback_controller</a>&#160;</td>
          <td class="paramname"><em>Left_Feedback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classfeedback__controller.html">feedback_controller</a>&#160;</td>
          <td class="paramname"><em>Right_Feedback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UART_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>huart</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialization For all task constructors. </p>
<p>All the input arguments require pre-constructed and pre-configured. The uart pointer required is included purely for debugging purposes. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a4b6f51c515a825fc94e0a71cdff1646b" name="a4b6f51c515a825fc94e0a71cdff1646b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6f51c515a825fc94e0a71cdff1646b">&#9670;&#160;</a></span>get_duty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t movement_task::get_duty </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to get the current duty output. </p>
<p>This function is used to verify the pwm output before implementing it with the servo motor. </p>

</div>
</div>
<a id="a7090b9325f85bdd9a79185616fe2ab86" name="a7090b9325f85bdd9a79185616fe2ab86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7090b9325f85bdd9a79185616fe2ab86">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void movement_task::run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run method to implement the FSM. </p>
<p>The run method uses the state variable to call the respective function using the state_fcn function. </p>

</div>
</div>
<a id="a84cd0d238f628f201020f9cabe254065" name="a84cd0d238f628f201020f9cabe254065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84cd0d238f628f201020f9cabe254065">&#9670;&#160;</a></span>state_0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void movement_task::state_0 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialization Task. </p>
<p>This state always transitions to state 1 and sets all private variable values to zero. </p>

</div>
</div>
<a id="af31531705744cc087e398a2cd3108b53" name="af31531705744cc087e398a2cd3108b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af31531705744cc087e398a2cd3108b53">&#9670;&#160;</a></span>state_1()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void movement_task::state_1 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State 1: Move out of Home. </p>
<p>In this state the robot moves both wheels a specific amount of encoder ticks. The amount of encoder ticks corresponds to a distance where the robot is fully out of the home bounding box which was determined by testing. The movment is accomplished by using the motor driver objects set PWM function, the encoder get count method, and the feedback controller control function. </p>

</div>
</div>
<a id="af5b4d926c7862bb6cd5b60099cc28e6b" name="af5b4d926c7862bb6cd5b60099cc28e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5b4d926c7862bb6cd5b60099cc28e6b">&#9670;&#160;</a></span>state_2()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void movement_task::state_2 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Satte 2: Rotate to begin circle. </p>
<p>In this state the robot moves both wheels a specific amount of encoder ticks. The amount of encoder ticks corresponds to turning the robot to be tangent to the circle The movment is accomplished by using the motor driver objects set PWM function, the encoder get count method, and the feedback controller control function. </p>

</div>
</div>
<a id="aecc7cb72f6565f904e8fdba650fb4e62" name="aecc7cb72f6565f904e8fdba650fb4e62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aecc7cb72f6565f904e8fdba650fb4e62">&#9670;&#160;</a></span>state_3()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void movement_task::state_3 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State 3: Move around in circle. </p>
<p>In this state the robot moves around the game board in circles. The movement is accomplished by setting the left motor duty cycle to double that of the right motor. The difference in motor speeds results in the robot moving in a circular path. The movement is accomplished by using the motor set pwm function. </p>

</div>
</div>
<a id="adaaf50a6ec344c6a023fa78bc45cb6d6" name="adaaf50a6ec344c6a023fa78bc45cb6d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaaf50a6ec344c6a023fa78bc45cb6d6">&#9670;&#160;</a></span>state_4()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void movement_task::state_4 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State 4: Return Home. </p>
<p>This function is accomplished by using the imu heading and integrated current position. This state has not been fully implemented yet. It will likely require an additional state or task dedicated to determining the robot's position in the arena using the IMU heading and the encoder position. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a54f01985e936321f83a509e73e76a063" name="a54f01985e936321f83a509e73e76a063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54f01985e936321f83a509e73e76a063">&#9670;&#160;</a></span>huart</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">UART_HandleTypeDef* movement_task::huart</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to a pre-initialized uart object. </p>
<p>Used for debugging </p>

</div>
</div>
<a id="a5665d1bdc41e24b4d64e0df3c371ebe2" name="a5665d1bdc41e24b4d64e0df3c371ebe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5665d1bdc41e24b4d64e0df3c371ebe2">&#9670;&#160;</a></span>num_states</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t movement_task::num_states</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to a list of all states. </p>
<p>This is used in the state_fcn function to list the states and the corresponding function </p>

</div>
</div>
<a id="a4e6780efc2ebed6fc3a96315d2d76cbc" name="a4e6780efc2ebed6fc3a96315d2d76cbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e6780efc2ebed6fc3a96315d2d76cbc">&#9670;&#160;</a></span>runs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t movement_task::runs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private Variable for number of times the task has ran. </p>
<p>This variable is incremented every time the task is ran. </p>

</div>
</div>
<a id="a70dcf006789a7dadd757a2b2f459d6ee" name="a70dcf006789a7dadd757a2b2f459d6ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70dcf006789a7dadd757a2b2f459d6ee">&#9670;&#160;</a></span>state_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classmovement__task.html#a11da9703e226518b4c26bb77a4f2f50b">state_fcn</a>* movement_task::state_list</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function for state 0. </p>
<p>Initialization state. In this state the I2C bus is initialized and set up for communication with the RGB color sensor. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="movement__task_8h_source.html">movement_task.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classmovement__task.html">movement_task</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
