<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Test: feedback_controller Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Test
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classfeedback__controller.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classfeedback__controller-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">feedback_controller Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Feedback controller class implements a closed loop KI controller.  
 <a href="classfeedback__controller.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="controller__driver_8h_source.html">controller_driver.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a883b5c40b59899e7c5b5707c8130ecff"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#a883b5c40b59899e7c5b5707c8130ecff">feedback_controller</a> (void)</td></tr>
<tr class="memdesc:a883b5c40b59899e7c5b5707c8130ecff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the controller object.  <br /></td></tr>
<tr class="separator:a883b5c40b59899e7c5b5707c8130ecff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c4aae915188e52a06520582fbebfde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#a15c4aae915188e52a06520582fbebfde">set_setpoint</a> (int32_t <a class="el" href="classfeedback__controller.html#a2fc8fb203219f4c39e5477f3ab01afaf">SET_POINT</a>)</td></tr>
<tr class="memdesc:a15c4aae915188e52a06520582fbebfde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the set point.  <br /></td></tr>
<tr class="separator:a15c4aae915188e52a06520582fbebfde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8f3d97dd4f9245193513bfd79c73fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#a2b8f3d97dd4f9245193513bfd79c73fe">set_KP</a> (int16_t <a class="el" href="classfeedback__controller.html#ad767d1a2c0448240343a8556f638f7df">KP</a>)</td></tr>
<tr class="memdesc:a2b8f3d97dd4f9245193513bfd79c73fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the Kp gain value.  <br /></td></tr>
<tr class="separator:a2b8f3d97dd4f9245193513bfd79c73fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188861f84c2add0d9d225eb250f106eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#a188861f84c2add0d9d225eb250f106eb">set_KI</a> (int16_t <a class="el" href="classfeedback__controller.html#a87fcfba6892213bf304e01eefc3aece7">KI</a>)</td></tr>
<tr class="memdesc:a188861f84c2add0d9d225eb250f106eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the Ki integral gain.  <br /></td></tr>
<tr class="separator:a188861f84c2add0d9d225eb250f106eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6455b564d636703045df862ccf34470"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#ab6455b564d636703045df862ccf34470">run</a> (int32_t <a class="el" href="classfeedback__controller.html#ab24a24f233a709a49791379d558057b8">CURR_CNT</a>)</td></tr>
<tr class="memdesc:ab6455b564d636703045df862ccf34470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to run the controller.  <br /></td></tr>
<tr class="separator:ab6455b564d636703045df862ccf34470"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad767d1a2c0448240343a8556f638f7df"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#ad767d1a2c0448240343a8556f638f7df">KP</a></td></tr>
<tr class="memdesc:ad767d1a2c0448240343a8556f638f7df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private variable corresponding to the proportional gain constant.  <br /></td></tr>
<tr class="separator:ad767d1a2c0448240343a8556f638f7df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87fcfba6892213bf304e01eefc3aece7"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#a87fcfba6892213bf304e01eefc3aece7">KI</a></td></tr>
<tr class="memdesc:a87fcfba6892213bf304e01eefc3aece7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private variable corresponding to the integral control constant.  <br /></td></tr>
<tr class="separator:a87fcfba6892213bf304e01eefc3aece7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a671c5cf9b34cf52b71146ede426fde00"><td class="memItemLeft" align="right" valign="top"><a id="a671c5cf9b34cf52b71146ede426fde00" name="a671c5cf9b34cf52b71146ede426fde00"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><b>DUTY_CYCLE</b></td></tr>
<tr class="memdesc:a671c5cf9b34cf52b71146ede426fde00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private variable for the required motor duty cycle. <br /></td></tr>
<tr class="separator:a671c5cf9b34cf52b71146ede426fde00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fc8fb203219f4c39e5477f3ab01afaf"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#a2fc8fb203219f4c39e5477f3ab01afaf">SET_POINT</a></td></tr>
<tr class="memdesc:a2fc8fb203219f4c39e5477f3ab01afaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private variable corresponding to the user defined set point.  <br /></td></tr>
<tr class="separator:a2fc8fb203219f4c39e5477f3ab01afaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab24a24f233a709a49791379d558057b8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#ab24a24f233a709a49791379d558057b8">CURR_CNT</a></td></tr>
<tr class="memdesc:ab24a24f233a709a49791379d558057b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private Variable for the current encoder value.  <br /></td></tr>
<tr class="separator:ab24a24f233a709a49791379d558057b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1148a7294544336a6de4d357668e5ea"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfeedback__controller.html#ad1148a7294544336a6de4d357668e5ea">INT_ERR</a></td></tr>
<tr class="memdesc:ad1148a7294544336a6de4d357668e5ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Private Variable for the accumulated Integral Error.  <br /></td></tr>
<tr class="separator:ad1148a7294544336a6de4d357668e5ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Feedback controller class implements a closed loop KI controller. </p>
<p>The feedback controller class simply provide Proportional and integral control to any system with accessible data. The construction of these objects needs a timer and relevant channel. Usage requires the user to input a set point and provide the current "position." The control algorithm then computes the error between the set point and current position. The error is then scaled by the Kp value and integrated over time base on the Ki value. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a883b5c40b59899e7c5b5707c8130ecff" name="a883b5c40b59899e7c5b5707c8130ecff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a883b5c40b59899e7c5b5707c8130ecff">&#9670;&#160;</a></span>feedback_controller()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">feedback_controller::feedback_controller </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the controller object. </p>
<p>The controller object requires no parameters for construction. It is initialized without setting a set point. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab6455b564d636703045df862ccf34470" name="ab6455b564d636703045df862ccf34470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6455b564d636703045df862ccf34470">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t feedback_controller::run </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>CURR_CNT</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to run the controller. </p>
<p>When calling this function, the controller runs. If the Ki, Kp, and setpoint values have not been set, the controller will run with 0 values set. The function takes in the current encoder value to compare to set point. The encoder value would be obtained by reading the encoder using an encoder object. </p>

</div>
</div>
<a id="a188861f84c2add0d9d225eb250f106eb" name="a188861f84c2add0d9d225eb250f106eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a188861f84c2add0d9d225eb250f106eb">&#9670;&#160;</a></span>set_KI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void feedback_controller::set_KI </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>KI</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the Ki integral gain. </p>
<p>Sets the Ki private variable to the input argument. Ki is initialized as 0. </p>

</div>
</div>
<a id="a2b8f3d97dd4f9245193513bfd79c73fe" name="a2b8f3d97dd4f9245193513bfd79c73fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b8f3d97dd4f9245193513bfd79c73fe">&#9670;&#160;</a></span>set_KP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void feedback_controller::set_KP </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>KP</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the Kp gain value. </p>
<p>Sets the Kp private variable to the input argument. Kp is initialized as 0. </p>

</div>
</div>
<a id="a15c4aae915188e52a06520582fbebfde" name="a15c4aae915188e52a06520582fbebfde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15c4aae915188e52a06520582fbebfde">&#9670;&#160;</a></span>set_setpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void feedback_controller::set_setpoint </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>SET_POINT</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the set point. </p>
<p>Calling this function puts the data in the input parameter, SET_POINT, in the set point private variable. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ab24a24f233a709a49791379d558057b8" name="ab24a24f233a709a49791379d558057b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab24a24f233a709a49791379d558057b8">&#9670;&#160;</a></span>CURR_CNT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t feedback_controller::CURR_CNT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private Variable for the current encoder value. </p>
<p>The current count is compared to the set point to compute the error. This value is obtained by using an encoder object to get the current count and pass that vaue into the controller object. </p>

</div>
</div>
<a id="ad1148a7294544336a6de4d357668e5ea" name="ad1148a7294544336a6de4d357668e5ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1148a7294544336a6de4d357668e5ea">&#9670;&#160;</a></span>INT_ERR</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t feedback_controller::INT_ERR</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private Variable for the accumulated Integral Error. </p>
<p>Over time the integral of error is calculated and stored in this variable. This is computed by measuring the error and multiplying it by the time between measurements and scaling by Ki. </p>

</div>
</div>
<a id="a87fcfba6892213bf304e01eefc3aece7" name="a87fcfba6892213bf304e01eefc3aece7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87fcfba6892213bf304e01eefc3aece7">&#9670;&#160;</a></span>KI</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t feedback_controller::KI</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private variable corresponding to the integral control constant. </p>
<p>The Ki value scales the integral control accordingly. </p>

</div>
</div>
<a id="ad767d1a2c0448240343a8556f638f7df" name="ad767d1a2c0448240343a8556f638f7df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad767d1a2c0448240343a8556f638f7df">&#9670;&#160;</a></span>KP</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int16_t feedback_controller::KP</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private variable corresponding to the proportional gain constant. </p>
<p>The Kp value scales the proportional gain accordingly. </p>

</div>
</div>
<a id="a2fc8fb203219f4c39e5477f3ab01afaf" name="a2fc8fb203219f4c39e5477f3ab01afaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fc8fb203219f4c39e5477f3ab01afaf">&#9670;&#160;</a></span>SET_POINT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t feedback_controller::SET_POINT</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Private variable corresponding to the user defined set point. </p>
<p>The set point is the desired position of the encoder. It is set manually and initialized as 0. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="controller__driver_8h_source.html">controller_driver.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classfeedback__controller.html">feedback_controller</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
